###############################################################################
# KubeNova .env template (copy to ".env")                                       #
###############################################################################
# List of EVERY environment variable used across code, compose, helm, and tests.
# No defaults are embedded in docker-compose; values must come from this file.

############################
# Core (Manager runtime)
############################
# DATABASE_URL: PostgreSQL connection string used by the Manager
#   Format: postgres://USER:PASSWORD@HOST:PORT/DB?sslmode=disable
#   Example (compose): postgres://kubenova:kubenova@db:5432/kubenova?sslmode=disable
DATABASE_URL=postgres://kubenova:kubenova@db:5432/kubenova?sslmode=disable

# KUBENOVA_REQUIRE_AUTH: enable JWT auth for API calls
#   Valid: true|false
#   Example: false (for local dev); true (for shared envs)
KUBENOVA_REQUIRE_AUTH=false

# JWT_SIGNING_KEY: HS256 secret used to issue/verify tokens when auth enabled
#   Generate: openssl rand -base64 32
#   Example: REPLACE-WITH-BASE64
JWT_SIGNING_KEY=

# KUBENOVA_E2E_FAKE: when true, health checks return ready without contacting clusters
#   Valid: true|false (tests may toggle)
KUBENOVA_E2E_FAKE=false

############################
# Database (compose: postgres container)
############################
# These are consumed by the Postgres image
POSTGRES_USER=kubenova
POSTGRES_PASSWORD=kubenova
POSTGRES_DB=kubenova

############################
# K8s/Proxy and Images
############################
# MANAGER_URL_PUBLIC: Manager URL advertised to Agents (ingress or port-forward)
#   Example: http://localhost:8080
MANAGER_URL_PUBLIC=http://localhost:8080

# CAPSULE_PROXY_URL: base URL for Capsule proxy (used by Helm chart/env injection)
#   Example: https://capsule-proxy.example.com
CAPSULE_PROXY_URL=

# AGENT_IMAGE: container image for the Agent installed on clusters
#   Example: ghcr.io/vaheed/kubenova/agent:dev
AGENT_IMAGE=ghcr.io/vaheed/kubenova/agent:dev

############################
# Telemetry
############################
# OTEL_EXPORTER_OTLP_ENDPOINT: enable OTLP HTTP exporter (e.g., http://otel:4318)
OTEL_EXPORTER_OTLP_ENDPOINT=
# OTEL_SAMPLING_RATIO: 0..1 sampling ratio (default 1.0)
OTEL_SAMPLING_RATIO=

############################
# E2E / Kind (test harness)
############################
# Gate the E2E suite (runs only when E2E_RUN=1 or when explicitly not skipped)
E2E_RUN=
E2E_SKIP=
# Cluster name for Kind
E2E_KIND_CLUSTER=kubenova-e2e
# Tooling binaries
E2E_KIND_BIN=kind
E2E_HELM_BIN=helm
E2E_KUBECTL_BIN=kubectl
E2E_DOCKER_BIN=docker
# Repo root (auto-detected by tests when empty)
E2E_REPO_ROOT=
# Helm chart path
E2E_MANAGER_CHART=deploy/helm/manager
# Images for E2E (optional overrides)
E2E_MANAGER_IMAGE=ghcr.io/vaheed/kubenova/manager:dev
E2E_AGENT_IMAGE=ghcr.io/vaheed/kubenova/agent:dev
# Namespace/release used by E2E Helm install
E2E_MANAGER_NAMESPACE=kubenova-system
E2E_MANAGER_RELEASE=kubenova-manager
# Local port used for port-forward
E2E_MANAGER_PORT=18080
# Controls whether to re-use an existing Kind cluster
E2E_USE_EXISTING_CLUSTER=false
# Skip cleanup after tests
E2E_SKIP_CLEANUP=false
# Build local images and load into Kind
E2E_BUILD_IMAGES=false
# Global wait timeout for E2E operations (e.g., 30m, 10m)
E2E_WAIT_TIMEOUT=20m

############################
# Misc
############################
# LOG_LEVEL can be used by loggers (info|debug); not strictly required by Manager
LOG_LEVEL=info
